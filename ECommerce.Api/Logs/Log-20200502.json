{
    "Timestamp": "2020-05-02T00:06:29.5189028+08:00",
    "Level": "Warning",
    "MessageTemplate": "Product of ID {ProductId} not found",
    "Properties": {
        "ProductId": 20,
        "SourceContext": "ECommerce.Api.Controllers.ProductsController",
        "ActionId": "6dd27e49-c731-4159-9507-369dc189b27c",
        "ActionName": "ECommerce.Api.Controllers.ProductsController.Get (ECommerce.Api)",
        "RequestId": "80000026-0000-fc00-b63f-84710c7967bb",
        "RequestPath": "/api/products/20",
        "SpanId": "|3328034a-47c1b3c4462e5cbf.2.d6a25e64_",
        "TraceId": "3328034a-47c1b3c4462e5cbf",
        "ParentId": "|3328034a-47c1b3c4462e5cbf.2."
    }
}
{
    "Timestamp": "2020-05-02T00:07:16.7297405+08:00",
    "Level": "Warning",
    "MessageTemplate": "Product of ID {ProductId} not found",
    "Properties": {
        "ProductId": 20,
        "SourceContext": "ECommerce.Api.Controllers.ProductsController",
        "ActionId": "6dd27e49-c731-4159-9507-369dc189b27c",
        "ActionName": "ECommerce.Api.Controllers.ProductsController.Get (ECommerce.Api)",
        "RequestId": "800000d6-0008-fd00-b63f-84710c7967bb",
        "RequestPath": "/api/products/20",
        "SpanId": "|1086136b-470b4831db3ce7ad.2.d6a25e6e_",
        "TraceId": "1086136b-470b4831db3ce7ad",
        "ParentId": "|1086136b-470b4831db3ce7ad.2."
    }
}
{
    "Timestamp": "2020-05-02T00:09:07.5039848+08:00",
    "Level": "Warning",
    "MessageTemplate": "Product of ID {ProductId} not found",
    "Properties": {
        "ProductId": 20,
        "SourceContext": "ECommerce.Api.Controllers.ProductsController",
        "ActionId": "6dd27e49-c731-4159-9507-369dc189b27c",
        "ActionName": "ECommerce.Api.Controllers.ProductsController.Get (ECommerce.Api)",
        "RequestId": "800000d7-0008-fd00-b63f-84710c7967bb",
        "RequestPath": "/api/products/20",
        "SpanId": "|1086136f-470b4831db3ce7ad.2.d6a25e74_",
        "TraceId": "1086136f-470b4831db3ce7ad",
        "ParentId": "|1086136f-470b4831db3ce7ad.2."
    }
}
{
    "Timestamp": "2020-05-02T00:09:15.8661154+08:00",
    "Level": "Warning",
    "MessageTemplate": "Product of ID {ProductId} not found",
    "Properties": {
        "ProductId": 20,
        "SourceContext": "ECommerce.Api.Controllers.ProductsController",
        "ActionId": "6dd27e49-c731-4159-9507-369dc189b27c",
        "ActionName": "ECommerce.Api.Controllers.ProductsController.Get (ECommerce.Api)",
        "RequestId": "80000096-0008-ff00-b63f-84710c7967bb",
        "RequestPath": "/api/products/20",
        "SpanId": "|1086137a-470b4831db3ce7ad.2.d6a25e7a_",
        "TraceId": "1086137a-470b4831db3ce7ad",
        "ParentId": "|1086137a-470b4831db3ce7ad.2."
    }
}
{
    "Timestamp": "2020-05-02T00:10:58.9538665+08:00",
    "Level": "Warning",
    "MessageTemplate": "Product of ID {ProductId} not found",
    "Properties": {
        "ProductId": 20,
        "SourceContext": "ECommerce.Api.Controllers.ProductsController",
        "ActionId": "eac92b6f-1a9f-4d49-b6d1-6246324570e8",
        "ActionName": "ECommerce.Api.Controllers.ProductsController.Get (ECommerce.Api)",
        "RequestId": "80000003-0004-fb00-b63f-84710c7967bb",
        "RequestPath": "/api/products/20",
        "SpanId": "|bd69fd4c-468cf83969f4d402.2.f95e805e_",
        "TraceId": "bd69fd4c-468cf83969f4d402",
        "ParentId": "|bd69fd4c-468cf83969f4d402.2."
    }
}
{
    "Timestamp": "2020-05-02T15:15:39.6216370+08:00",
    "Level": "Warning",
    "MessageTemplate": "Couldn't find user of ID {UserId}",
    "Properties": {
        "UserId": "67842438-63bc-4826-8f1a-f48e2f669736",
        "SourceContext": "ECommerce.Api.Controllers.UsersController",
        "ActionId": "d30a7d65-09c7-4ae3-9ba6-9d511879cf78",
        "ActionName": "ECommerce.Api.Controllers.UsersController.Get (ECommerce.Api)",
        "RequestId": "8000001f-0008-fb00-b63f-84710c7967bb",
        "RequestPath": "/api/users/info/67842438-63bc-4826-8f1a-f48e2f669736",
        "SpanId": "|7bfe6d1e-4dd29fb14830c14d.1.6db6262a_",
        "TraceId": "7bfe6d1e-4dd29fb14830c14d",
        "ParentId": "|7bfe6d1e-4dd29fb14830c14d.1."
    }
}
{
    "Timestamp": "2020-05-02T16:09:57.8290102+08:00",
    "Level": "Error",
    "MessageTemplate": "Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}",
    "Properties": {
        "elapsed": "16",
        "parameters": "@p0='?' (DbType = Int64), @p1='?' (DbType = Int64)",
        "commandType": "Text",
        "commandTimeout": 30,
        "newLine": "\r\n",
        "commandText": "SET NOCOUNT ON;\r\nINSERT INTO [ProductCategories] ([CategoryId], [ProductId])\r\nVALUES (@p0, @p1);\r\nSELECT [Id]\r\nFROM [ProductCategories]\r\nWHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();",
        "EventId": {
            "Id": 20102,
            "Name": "Microsoft.EntityFrameworkCore.Database.Command.CommandError"
        },
        "SourceContext": "Microsoft.EntityFrameworkCore.Database.Command",
        "ActionId": "5078db8b-320e-490e-b301-03700d45ff97",
        "ActionName": "ECommerce.Api.Controllers.ProductsController.Add (ECommerce.Api)",
        "RequestId": "80000014-0008-fc00-b63f-84710c7967bb",
        "RequestPath": "/api/products",
        "SpanId": "|479af68c-48df62ea5e6208ac.2.411f7dbd_",
        "TraceId": "479af68c-48df62ea5e6208ac",
        "ParentId": "|479af68c-48df62ea5e6208ac.2."
    }
}
{
    "Timestamp": "2020-05-02T16:09:57.9436987+08:00",
    "Level": "Error",
    "MessageTemplate": "An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}",
    "Exception": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductCategories_Products_ProductId\". The conflict occurred in database \"ECommerce_New\", table \"dbo.Products\", column 'Id'.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\nClientConnectionId:d1dfecc9-09d0-4a31-9c93-9d295727006f\r\nError Number:547,State:0,Class:16\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)",
    "Properties": {
        "contextType": "ECommerce.DataAccess.ApplicationDbContext",
        "newline": "\r\n",
        "error": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductCategories_Products_ProductId\". The conflict occurred in database \"ECommerce_New\", table \"dbo.Products\", column 'Id'.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\nClientConnectionId:d1dfecc9-09d0-4a31-9c93-9d295727006f\r\nError Number:547,State:0,Class:16\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)",
        "EventId": {
            "Id": 10000,
            "Name": "Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"
        },
        "SourceContext": "Microsoft.EntityFrameworkCore.Update",
        "ActionId": "5078db8b-320e-490e-b301-03700d45ff97",
        "ActionName": "ECommerce.Api.Controllers.ProductsController.Add (ECommerce.Api)",
        "RequestId": "80000014-0008-fc00-b63f-84710c7967bb",
        "RequestPath": "/api/products",
        "SpanId": "|479af68c-48df62ea5e6208ac.2.411f7dbd_",
        "TraceId": "479af68c-48df62ea5e6208ac",
        "ParentId": "|479af68c-48df62ea5e6208ac.2."
    }
}
{
    "Timestamp": "2020-05-02T16:09:57.9590581+08:00",
    "Level": "Error",
    "MessageTemplate": "Error occurred while adding new product {@ProductVM} to database",
    "Exception": "Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductCategories_Products_ProductId\". The conflict occurred in database \"ECommerce_New\", table \"dbo.Products\", column 'Id'.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\nClientConnectionId:d1dfecc9-09d0-4a31-9c93-9d295727006f\r\nError Number:547,State:0,Class:16\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at ECommerce.Api.Controllers.ProductsController.Add(ProductViewModel productVM) in C:\\Users\\yzhon\\source\\repos\\ECommerce\\ECommerce.Api\\Controllers\\ProductsController.cs:line 63",
    "Properties": {
        "ProductVM": {
            "_typeTag": "ProductViewModel",
            "Product": {
                "_typeTag": "Product",
                "Id": 0,
                "Name": "Alienware 15 R4",
                "Description": "A powerul laptop beast that meets all your expectations",
                "Price": 6999,
                "ImageUrl": "\\images\\products\\9908a0d4-8d9d-4857-80ad-ceb9ce829593.jpg",
                "IsAvailable": true,
                "CreatedBy": "79671f06-c30c-47f4-91c2-5022e5726b4c",
                "CreatedAt": "2020-05-02T16:09:57.4040536+08:00",
                "UpdatedBy": null,
                "UpdatedAt": "0001-01-01T00:00:00.0000000"
            },
            "CategoryList": null,
            "SelectedCategoryIds": [
                1,
                3
            ],
            "Category_1": "1",
            "Category_2": "3",
            "Category_3": null
        },
        "SourceContext": "ECommerce.Api.Controllers.ProductsController",
        "ActionId": "5078db8b-320e-490e-b301-03700d45ff97",
        "ActionName": "ECommerce.Api.Controllers.ProductsController.Add (ECommerce.Api)",
        "RequestId": "80000014-0008-fc00-b63f-84710c7967bb",
        "RequestPath": "/api/products",
        "SpanId": "|479af68c-48df62ea5e6208ac.2.411f7dbd_",
        "TraceId": "479af68c-48df62ea5e6208ac",
        "ParentId": "|479af68c-48df62ea5e6208ac.2."
    }
}
{
    "Timestamp": "2020-05-02T16:09:57.9782575+08:00",
    "Level": "Error",
    "MessageTemplate": "HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms",
    "Properties": {
        "RequestMethod": "POST",
        "RequestPath": "/api/products",
        "StatusCode": 500,
        "Elapsed": 551.0914,
        "SourceContext": "Serilog.AspNetCore.RequestLoggingMiddleware",
        "RequestId": "80000014-0008-fc00-b63f-84710c7967bb",
        "SpanId": "|479af68c-48df62ea5e6208ac.2.411f7dbd_",
        "TraceId": "479af68c-48df62ea5e6208ac",
        "ParentId": "|479af68c-48df62ea5e6208ac.2."
    },
    "Renderings": {
        "Elapsed": [
            {
                "Format": "0.0000",
                "Rendering": "551.0914"
            }
        ]
    }
}{"Timestamp":"2020-05-02T16:15:44.2016671+08:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","Properties":{"elapsed":"10","parameters":"@p0='?' (DbType = Int64), @p1='?' (DbType = Int64)","commandType":"Text","commandTimeout":30,"newLine":"\r\n","commandText":"SET NOCOUNT ON;\r\nINSERT INTO [ProductCategories] ([CategoryId], [ProductId])\r\nVALUES (@p0, @p1);\r\nSELECT [Id]\r\nFROM [ProductCategories]\r\nWHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"f25baa0b-2569-48d9-9d64-f521d75ab4d6","ActionName":"ECommerce.Api.Controllers.ProductsController.Add (ECommerce.Api)","RequestId":"800000e1-0004-fe00-b63f-84710c7967bb","RequestPath":"/api/products","SpanId":"|e9059b52-48ea203b224bc6e3.2.1c79ce20_","TraceId":"e9059b52-48ea203b224bc6e3","ParentId":"|e9059b52-48ea203b224bc6e3.2."}}
{"Timestamp":"2020-05-02T16:15:44.3053044+08:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductCategories_Products_ProductId\". The conflict occurred in database \"ECommerce_New\", table \"dbo.Products\", column 'Id'.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\nClientConnectionId:14c3671d-4cd4-47b1-ab04-fb704523bb48\r\nError Number:547,State:0,Class:16\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"ECommerce.DataAccess.ApplicationDbContext","newline":"\r\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductCategories_Products_ProductId\". The conflict occurred in database \"ECommerce_New\", table \"dbo.Products\", column 'Id'.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\nClientConnectionId:14c3671d-4cd4-47b1-ab04-fb704523bb48\r\nError Number:547,State:0,Class:16\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"f25baa0b-2569-48d9-9d64-f521d75ab4d6","ActionName":"ECommerce.Api.Controllers.ProductsController.Add (ECommerce.Api)","RequestId":"800000e1-0004-fe00-b63f-84710c7967bb","RequestPath":"/api/products","SpanId":"|e9059b52-48ea203b224bc6e3.2.1c79ce20_","TraceId":"e9059b52-48ea203b224bc6e3","ParentId":"|e9059b52-48ea203b224bc6e3.2."}}
{"Timestamp":"2020-05-02T16:15:44.3202053+08:00","Level":"Error","MessageTemplate":"Error occurred while adding new product {@ProductVM} to database","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductCategories_Products_ProductId\". The conflict occurred in database \"ECommerce_New\", table \"dbo.Products\", column 'Id'.\r\nThe statement has been terminated.\r\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\r\n   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\nClientConnectionId:14c3671d-4cd4-47b1-ab04-fb704523bb48\r\nError Number:547,State:0,Class:16\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at ECommerce.Api.Controllers.ProductsController.Add(ProductViewModel productVM) in C:\\Users\\yzhon\\source\\repos\\ECommerce\\ECommerce.Api\\Controllers\\ProductsController.cs:line 64","Properties":{"ProductVM":{"_typeTag":"ProductViewModel","Product":{"_typeTag":"Product","Id":0,"Name":"Alienware 15 R4","Description":"A powerful laptop beast","Price":69999,"ImageUrl":null,"IsAvailable":true,"CreatedBy":"79671f06-c30c-47f4-91c2-5022e5726b4c","CreatedAt":"2020-05-02T16:15:43.8643760+08:00","UpdatedBy":null,"UpdatedAt":"0001-01-01T00:00:00.0000000"},"CategoryList":null,"SelectedCategoryIds":[1,3],"Category_1":"1","Category_2":"3","Category_3":null},"SourceContext":"ECommerce.Api.Controllers.ProductsController","ActionId":"f25baa0b-2569-48d9-9d64-f521d75ab4d6","ActionName":"ECommerce.Api.Controllers.ProductsController.Add (ECommerce.Api)","RequestId":"800000e1-0004-fe00-b63f-84710c7967bb","RequestPath":"/api/products","SpanId":"|e9059b52-48ea203b224bc6e3.2.1c79ce20_","TraceId":"e9059b52-48ea203b224bc6e3","ParentId":"|e9059b52-48ea203b224bc6e3.2."}}
{"Timestamp":"2020-05-02T16:15:44.3382845+08:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"POST","RequestPath":"/api/products","StatusCode":500,"Elapsed":455.6941,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"800000e1-0004-fe00-b63f-84710c7967bb","SpanId":"|e9059b52-48ea203b224bc6e3.2.1c79ce20_","TraceId":"e9059b52-48ea203b224bc6e3","ParentId":"|e9059b52-48ea203b224bc6e3.2."},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"455.6941"}]}}
