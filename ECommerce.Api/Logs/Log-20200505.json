{"Timestamp":"2020-05-05T10:12:48.4382819+08:00","Level":"Warning","MessageTemplate":"Attempt to login with {Email} which doesn't exist","Properties":{"Email":"user@example.com","SourceContext":"ECommerce.Api.Controllers.AuthController","ActionId":"c510f050-4b84-4b3b-8ef2-d8dd64213465","ActionName":"ECommerce.Api.Controllers.AuthController.Login (ECommerce.Api)","RequestId":"80000008-0008-fd00-b63f-84710c7967bb","RequestPath":"/api/Auth/login","SpanId":"|74c98b42-4f0980d5c22a0fb4.","TraceId":"74c98b42-4f0980d5c22a0fb4","ParentId":""}}
{"Timestamp":"2020-05-05T11:41:20.6621391+08:00","Level":"Error","MessageTemplate":"Error occurred when updating user {@User} in database","Exception":"System.InvalidOperationException: The instance of entity type 'ApplicationUser' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SetEntityState(InternalEntityEntry entry, EntityState entityState)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SetEntityState[TEntity](TEntity entity, EntityState entityState)\r\n   at Microsoft.EntityFrameworkCore.DbContext.Update[TEntity](TEntity entity)\r\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)\r\n   at ECommerce.Api.Controllers.UsersController.Update(ApplicationUser user) in C:\\Users\\yzhon\\source\\repos\\ECommerce\\ECommerce.Api\\Controllers\\UsersController.cs:line 96","Properties":{"User":{"_typeTag":"ApplicationUser","Name":"Admin User","Address":"Admin Test Address","CreatedBy":"79671f06-c30c-47f4-91c2-5022e5726b4c","CreatedAt":"2020-05-02T14:12:48.9512937","Role":null,"Id":"79671f06-c30c-47f4-91c2-5022e5726b4c","UserName":"admin@gmail.com","NormalizedUserName":"ADMIN@GMAIL.COM","Email":"admin@gmail.com","NormalizedEmail":"ADMIN@GMAIL.COM","EmailConfirmed":false,"PasswordHash":"AQAAAAEAACcQAAAAEDFVuo40RuYQbLoV+jhwrg7DwcDzjbCSZcnTTdL8kXV23ZvWiqWJTlRypW7CU7jZnw==","SecurityStamp":"XXVW3ME6C4VJD2Y5BOBHOU7ZUQSHYOAF","ConcurrencyStamp":"7a252ec3-8d41-4868-b260-69e5327f905d","PhoneNumber":"0123456789","PhoneNumberConfirmed":false,"TwoFactorEnabled":false,"LockoutEnd":null,"LockoutEnabled":true,"AccessFailedCount":0},"SourceContext":"ECommerce.Api.Controllers.UsersController","ActionId":"d8ebe832-834c-4a7a-8898-fac8f758c47f","ActionName":"ECommerce.Api.Controllers.UsersController.Update (ECommerce.Api)","RequestId":"8000002a-0008-fd00-b63f-84710c7967bb","RequestPath":"/api/users","SpanId":"|f80a0267-4513768e970b159a.3.16592ee2_","TraceId":"f80a0267-4513768e970b159a","ParentId":"|f80a0267-4513768e970b159a.3."}}
{"Timestamp":"2020-05-05T11:41:20.7203427+08:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"PUT","RequestPath":"/api/users","StatusCode":500,"Elapsed":83.6959,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"8000002a-0008-fd00-b63f-84710c7967bb","SpanId":"|f80a0267-4513768e970b159a.3.16592ee2_","TraceId":"f80a0267-4513768e970b159a","ParentId":"|f80a0267-4513768e970b159a.3."},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"83.6959"}]}}
{"Timestamp":"2020-05-05T11:41:54.0225862+08:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","Exception":"System.InvalidOperationException: A second operation started on this context before a previous operation completed. This is usually caused by different threads using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.\r\n   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"ECommerce.DataAccess.ApplicationDbContext","newline":"\r\n","error":"System.InvalidOperationException: A second operation started on this context before a previous operation completed. This is usually caused by different threads using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.\r\n   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"d8ebe832-834c-4a7a-8898-fac8f758c47f","ActionName":"ECommerce.Api.Controllers.UsersController.Update (ECommerce.Api)","RequestId":"80000041-0008-fd00-b63f-84710c7967bb","RequestPath":"/api/users","SpanId":"|f80a0276-4513768e970b159a.3.16592efd_","TraceId":"f80a0276-4513768e970b159a","ParentId":"|f80a0276-4513768e970b159a.3."}}
{"Timestamp":"2020-05-05T11:41:54.0241315+08:00","Level":"Error","MessageTemplate":"Error occurred when updating user {@User} in database","Exception":"System.InvalidOperationException: A second operation started on this context before a previous operation completed. This is usually caused by different threads using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.\r\n   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at ECommerce.Api.Controllers.UsersController.Update(ApplicationUser user) in C:\\Users\\yzhon\\source\\repos\\ECommerce\\ECommerce.Api\\Controllers\\UsersController.cs:line 97","Properties":{"User":{"_typeTag":"ApplicationUser","Name":"Admin User","Address":null,"CreatedBy":"79671f06-c30c-47f4-91c2-5022e5726b4c","CreatedAt":"2020-05-02T14:12:48.9512937","Role":null,"Id":"79671f06-c30c-47f4-91c2-5022e5726b4c","UserName":"admin@gmail.com","NormalizedUserName":"ADMIN@GMAIL.COM","Email":"admin@gmail.com","NormalizedEmail":"ADMIN@GMAIL.COM","EmailConfirmed":false,"PasswordHash":"AQAAAAEAACcQAAAAEDFVuo40RuYQbLoV+jhwrg7DwcDzjbCSZcnTTdL8kXV23ZvWiqWJTlRypW7CU7jZnw==","SecurityStamp":"XXVW3ME6C4VJD2Y5BOBHOU7ZUQSHYOAF","ConcurrencyStamp":"7a252ec3-8d41-4868-b260-69e5327f905d","PhoneNumber":"0123456789","PhoneNumberConfirmed":false,"TwoFactorEnabled":false,"LockoutEnd":null,"LockoutEnabled":true,"AccessFailedCount":0},"SourceContext":"ECommerce.Api.Controllers.UsersController","ActionId":"d8ebe832-834c-4a7a-8898-fac8f758c47f","ActionName":"ECommerce.Api.Controllers.UsersController.Update (ECommerce.Api)","RequestId":"80000041-0008-fd00-b63f-84710c7967bb","RequestPath":"/api/users","SpanId":"|f80a0276-4513768e970b159a.3.16592efd_","TraceId":"f80a0276-4513768e970b159a","ParentId":"|f80a0276-4513768e970b159a.3."}}
{"Timestamp":"2020-05-05T11:41:54.0255182+08:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"PUT","RequestPath":"/api/users","StatusCode":500,"Elapsed":33.8813,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"80000041-0008-fd00-b63f-84710c7967bb","SpanId":"|f80a0276-4513768e970b159a.3.16592efd_","TraceId":"f80a0276-4513768e970b159a","ParentId":"|f80a0276-4513768e970b159a.3."},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"33.8813"}]}}
{"Timestamp":"2020-05-05T11:43:05.5788250+08:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","Exception":"System.InvalidOperationException: A second operation started on this context before a previous operation completed. This is usually caused by different threads using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.\r\n   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"ECommerce.DataAccess.ApplicationDbContext","newline":"\r\n","error":"System.InvalidOperationException: A second operation started on this context before a previous operation completed. This is usually caused by different threads using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.\r\n   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"d8ebe832-834c-4a7a-8898-fac8f758c47f","ActionName":"ECommerce.Api.Controllers.UsersController.Update (ECommerce.Api)","RequestId":"80000015-0008-fc00-b63f-84710c7967bb","RequestPath":"/api/users","SpanId":"|f80a0278-4513768e970b159a.3.16592f02_","TraceId":"f80a0278-4513768e970b159a","ParentId":"|f80a0278-4513768e970b159a.3."}}
{"Timestamp":"2020-05-05T11:43:05.5803129+08:00","Level":"Error","MessageTemplate":"Error occurred when updating user {@User} in database","Exception":"System.InvalidOperationException: A second operation started on this context before a previous operation completed. This is usually caused by different threads using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.\r\n   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at ECommerce.Api.Controllers.UsersController.Update(ApplicationUser user) in C:\\Users\\yzhon\\source\\repos\\ECommerce\\ECommerce.Api\\Controllers\\UsersController.cs:line 97","Properties":{"User":{"_typeTag":"ApplicationUser","Name":"Admin User","Address":"Xiamen University Malaysia, Jalan Sunsuria, Bandar Sunsuria","CreatedBy":"79671f06-c30c-47f4-91c2-5022e5726b4c","CreatedAt":"2020-05-02T14:12:48.9512937","Role":null,"Id":"79671f06-c30c-47f4-91c2-5022e5726b4c","UserName":"admin@gmail.com","NormalizedUserName":"ADMIN@GMAIL.COM","Email":"admin@gmail.com","NormalizedEmail":"ADMIN@GMAIL.COM","EmailConfirmed":false,"PasswordHash":"AQAAAAEAACcQAAAAEDFVuo40RuYQbLoV+jhwrg7DwcDzjbCSZcnTTdL8kXV23ZvWiqWJTlRypW7CU7jZnw==","SecurityStamp":"XXVW3ME6C4VJD2Y5BOBHOU7ZUQSHYOAF","ConcurrencyStamp":"7a252ec3-8d41-4868-b260-69e5327f905d","PhoneNumber":"01234567891","PhoneNumberConfirmed":false,"TwoFactorEnabled":false,"LockoutEnd":null,"LockoutEnabled":true,"AccessFailedCount":0},"SourceContext":"ECommerce.Api.Controllers.UsersController","ActionId":"d8ebe832-834c-4a7a-8898-fac8f758c47f","ActionName":"ECommerce.Api.Controllers.UsersController.Update (ECommerce.Api)","RequestId":"80000015-0008-fc00-b63f-84710c7967bb","RequestPath":"/api/users","SpanId":"|f80a0278-4513768e970b159a.3.16592f02_","TraceId":"f80a0278-4513768e970b159a","ParentId":"|f80a0278-4513768e970b159a.3."}}
{"Timestamp":"2020-05-05T11:43:05.5820832+08:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"PUT","RequestPath":"/api/users","StatusCode":500,"Elapsed":6.3951,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"80000015-0008-fc00-b63f-84710c7967bb","SpanId":"|f80a0278-4513768e970b159a.3.16592f02_","TraceId":"f80a0278-4513768e970b159a","ParentId":"|f80a0278-4513768e970b159a.3."},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"6.3951"}]}}
{"Timestamp":"2020-05-05T11:46:05.3717630+08:00","Level":"Error","MessageTemplate":"Error occurred when updating user {@User} in database","Exception":"System.InvalidOperationException: The instance of entity type 'ApplicationUser' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SetEntityState(InternalEntityEntry entry, EntityState entityState)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SetEntityState[TEntity](TEntity entity, EntityState entityState)\r\n   at Microsoft.EntityFrameworkCore.DbContext.Update[TEntity](TEntity entity)\r\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)\r\n   at ECommerce.Api.Controllers.UsersController.Update(ApplicationUser user) in C:\\Users\\yzhon\\source\\repos\\ECommerce\\ECommerce.Api\\Controllers\\UsersController.cs:line 96","Properties":{"User":{"_typeTag":"ApplicationUser","Name":"Admin User","Address":null,"CreatedBy":"79671f06-c30c-47f4-91c2-5022e5726b4c","CreatedAt":"2020-05-02T14:12:48.9512937","Role":null,"Id":"79671f06-c30c-47f4-91c2-5022e5726b4c","UserName":"admin@gmail.com","NormalizedUserName":"ADMIN@GMAIL.COM","Email":"admin@gmail.com","NormalizedEmail":"ADMIN@GMAIL.COM","EmailConfirmed":false,"PasswordHash":"AQAAAAEAACcQAAAAEDFVuo40RuYQbLoV+jhwrg7DwcDzjbCSZcnTTdL8kXV23ZvWiqWJTlRypW7CU7jZnw==","SecurityStamp":"XXVW3ME6C4VJD2Y5BOBHOU7ZUQSHYOAF","ConcurrencyStamp":"7a252ec3-8d41-4868-b260-69e5327f905d","PhoneNumber":"01234567891","PhoneNumberConfirmed":false,"TwoFactorEnabled":false,"LockoutEnd":null,"LockoutEnabled":true,"AccessFailedCount":0},"SourceContext":"ECommerce.Api.Controllers.UsersController","ActionId":"4784eafd-ae55-4af1-858e-a68fbc77ab67","ActionName":"ECommerce.Api.Controllers.UsersController.Update (ECommerce.Api)","RequestId":"80000015-000a-fe00-b63f-84710c7967bb","RequestPath":"/api/users","SpanId":"|f80a027c-4513768e970b159a.3.a2924269_","TraceId":"f80a027c-4513768e970b159a","ParentId":"|f80a027c-4513768e970b159a.3."}}
{"Timestamp":"2020-05-05T11:46:05.4373111+08:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"PUT","RequestPath":"/api/users","StatusCode":500,"Elapsed":121.0359,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"80000015-000a-fe00-b63f-84710c7967bb","SpanId":"|f80a027c-4513768e970b159a.3.a2924269_","TraceId":"f80a027c-4513768e970b159a","ParentId":"|f80a027c-4513768e970b159a.3."},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"121.0359"}]}}
{"Timestamp":"2020-05-05T11:46:10.6572130+08:00","Level":"Error","MessageTemplate":"Error occurred when updating user {@User} in database","Exception":"System.InvalidOperationException: The instance of entity type 'ApplicationUser' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SetEntityState(InternalEntityEntry entry, EntityState entityState)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SetEntityState[TEntity](TEntity entity, EntityState entityState)\r\n   at Microsoft.EntityFrameworkCore.DbContext.Update[TEntity](TEntity entity)\r\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)\r\n   at ECommerce.Api.Controllers.UsersController.Update(ApplicationUser user) in C:\\Users\\yzhon\\source\\repos\\ECommerce\\ECommerce.Api\\Controllers\\UsersController.cs:line 96","Properties":{"User":{"_typeTag":"ApplicationUser","Name":"Admin User","Address":null,"CreatedBy":"79671f06-c30c-47f4-91c2-5022e5726b4c","CreatedAt":"2020-05-02T14:12:48.9512937","Role":null,"Id":"79671f06-c30c-47f4-91c2-5022e5726b4c","UserName":"admin@gmail.com","NormalizedUserName":"ADMIN@GMAIL.COM","Email":"admin@gmail.com","NormalizedEmail":"ADMIN@GMAIL.COM","EmailConfirmed":false,"PasswordHash":"AQAAAAEAACcQAAAAEDFVuo40RuYQbLoV+jhwrg7DwcDzjbCSZcnTTdL8kXV23ZvWiqWJTlRypW7CU7jZnw==","SecurityStamp":"XXVW3ME6C4VJD2Y5BOBHOU7ZUQSHYOAF","ConcurrencyStamp":"7a252ec3-8d41-4868-b260-69e5327f905d","PhoneNumber":"0123456789","PhoneNumberConfirmed":false,"TwoFactorEnabled":false,"LockoutEnd":null,"LockoutEnabled":true,"AccessFailedCount":0},"SourceContext":"ECommerce.Api.Controllers.UsersController","ActionId":"4784eafd-ae55-4af1-858e-a68fbc77ab67","ActionName":"ECommerce.Api.Controllers.UsersController.Update (ECommerce.Api)","RequestId":"8000001a-000a-fe00-b63f-84710c7967bb","RequestPath":"/api/users","SpanId":"|f80a027e-4513768e970b159a.3.a292426e_","TraceId":"f80a027e-4513768e970b159a","ParentId":"|f80a027e-4513768e970b159a.3."}}
{"Timestamp":"2020-05-05T11:46:10.6600001+08:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"PUT","RequestPath":"/api/users","StatusCode":500,"Elapsed":11.3989,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"8000001a-000a-fe00-b63f-84710c7967bb","SpanId":"|f80a027e-4513768e970b159a.3.a292426e_","TraceId":"f80a027e-4513768e970b159a","ParentId":"|f80a027e-4513768e970b159a.3."},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"11.3989"}]}}
